#import libraries
import pandas as pd

#config
configfile: 'config/config.yaml'

#rules
include: 'rules/wtdbg2.smk'
include: 'rules/quast.smk'

#load table
df=(pd.read_table(config['samples'], dtype={'sample': str, 'path': str})
	.set_index('sample', drop=False)
	.sort_index()
)

#run
rule all:
    input:
        expand('results/{sample}/wtdbg2/assembly.cnsp.fa', sample=df['sample'].tolist()),
        expand('results/{sample}/quast/cns/report.txt', sample=df['sample'].tolist())

rule wtdbg2:
    input:
        expand('results/{sample}/wtdbg2/assembly.cnsp.fa', sample=df['sample'].tolist())

rule quast:
    input:
       expand('results/{sample}/quast/cns/report.txt', sample=df['sample'].tolist()) 